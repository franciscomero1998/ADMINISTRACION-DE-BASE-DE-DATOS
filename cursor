-- CURSOR --
	DECLARE  @VIS_CODIGO CHAR(16),@VIS_FECHA CHAR(16),@USU_CEDULA CHAR(16),
			 @USU_NOMBRE CHAR(16),@USU_APELLIDO CHAR(20),@EST_DETALLE CHAR(15)
	DECLARE CURSORVI1 CURSOR
	FOR SELECT VI.VIS_CODIGO,VI.VIS_FECHA,U.USU_CEDULA,U.USU_NOMBRE,U.USU_APELLIDO,E.EST_DETALLE
	FROM  VISITA VI INNER JOIN USUARIO U ON  U.USU_CEDULA = VI.USU_CEDULAPK 
	INNER JOIN ESTADO_REGISTRO  E ON E.EST_CODIGO = VI.EST_CODIGOPK
	OPEN CURSORVI1
	FETCH CURSORVI1 INTO  @VIS_CODIGO,@VIS_FECHA,@USU_CEDULA,
						  @USU_NOMBRE,@USU_APELLIDO,@EST_DETALLE
	PRINT 'CODIGO_VISITA   FECHA_VISITA   CEDULA_USUARIO   NOMBRE_USUARIO   APELLIDO_USUARIO   DETALLE'
	WHILE @@FETCH_STATUS = 0
		BEGIN
		PRINT @VIS_CODIGO+ +@VIS_FECHA+ +@USU_CEDULA+ +@USU_NOMBRE+ +@USU_APELLIDO+ +@EST_DETALLE
		FETCH CURSORVI1 INTO @VIS_CODIGO,@VIS_FECHA,@USU_CEDULA,
						     @USU_NOMBRE,@USU_APELLIDO,@EST_DETALLE
		END
	CLOSE CURSORVI1
	DEALLOCATE CURSORVI1

	-- PROCEDIMIENTO ALMACENADO --
	CREATE PROCEDURE DIVORCIO
			 @USU_CEDULAPK CHAR(30)	
	AS
	SELECT P.DIV_CODIGO,P.DIV_DATE,U.USU_CEDULA,U.USU_NOMBRE,U.USU_APELLIDO
	FROM PEDIDO_DIVORCIO P INNER JOIN USUARIO U ON  U.USU_CEDULA = P.USU_CEDULAPK
	WHERE USU_CEDULAPK = 1352498953;
	GO
	EXEC DIVORCIO '1352498953'

